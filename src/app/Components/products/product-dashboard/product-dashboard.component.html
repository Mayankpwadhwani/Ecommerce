<mat-form-field class="search">
  <mat-label>Search</mat-label>
  <input matInput [(ngModel)]="search" name="filter" (ngModelChange)="onSearchProducts()" type="search">
</mat-form-field>
<mat-form-field class="select">
  <mat-label>select</mat-label>
  <mat-select (selectionChange)="filterCategory($event.value)">
    @for (category of categories; track category) {
    <mat-option [value]="category">{{category.name}}</mat-option>
    }
  </mat-select>
</mat-form-field>
<button class="create" (click)=" openCreateDialog()" mat-stroked-button>+create</button>
<table mat-table [dataSource]="datasource" matSort class="tab mat-elevation-z4">
  <ng-container matColumnDef="imageUrl">
    <th mat-header-cell *matHeaderCellDef>Image</th>
    <td mat-cell *matCellDef="let item"><img class="image" src={{item.images[0]}} *ngIf="item.images?.length > 0"> </td>
  </ng-container>
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
    <td mat-cell *matCellDef="let item"> {{item.name}} </td>
  </ng-container>
  <ng-container matColumnDef="category">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Category</th>
    <td mat-cell *matCellDef="let item"> {{item.category.name}} </td>
  </ng-container>
  <ng-container matColumnDef="price">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Price </th>
    <td mat-cell *matCellDef="let item"> {{item.price}} </td>
  </ng-container>
  <ng-container matColumnDef="discount">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Discount</th>
    <td mat-cell *matCellDef="let item"> {{item.discount}}% </td>
  </ng-container>
  <ng-container matColumnDef="action">
    <th mat-header-cell *matHeaderCellDef></th>
    <td mat-cell *matCellDef="let item;let i=index">
      <button mat-button (click)="openEditDialog(item)">Edit</button>
      <button [routerLink]="['/products/details',item.name]" mat-stroked-button>view more</button>
      <button (click)=" deleteProduct(item.id)" mat-button color="warn">
        Delete
      </button>
    </td>
  </ng-container>
  <tr mat-header-row *matHeaderRowDef="productColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: productColumns;"></tr>
</table>
<mat-paginator [length]="5" [pageSize]="4" [pageSizeOptions]="[2, 4, 8, 16]" aria-label="Select page">
</mat-paginator>
<router-outlet></router-outlet>